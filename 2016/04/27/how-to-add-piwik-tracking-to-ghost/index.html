<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> HowTo Add Piwik Tracking to Ghost · SAMZONG</title><meta name="description" content="HowTo Add Piwik Tracking to Ghost - SAMZONG"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://samzong.me/atom.xml" title="SAMZONG"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">HowTo Add Piwik Tracking to Ghost</h1><div class="post-info">Apr 27, 2016</div><div class="post-content"><p>This is what about piwik on wiki. <a href="https://en.wikipedia.org/wiki/Piwik" target="_blank" rel="external">goto</a></p>
<h2 id="Step-1-Getting-your-Piwik-Tracking-code"><a href="#Step-1-Getting-your-Piwik-Tracking-code" class="headerlink" title="Step 1 - Getting your Piwik Tracking code"></a>Step 1 - Getting your Piwik Tracking code</h2><p>The first step to having Piwik tracking your Ghost blog will be to add a new website in Piwik, if you are unfamiliar with this process you can checkout the Piwik documention on Managing Websites. With your Ghost blog added into Piwik you will end up with tracking code that will look similar to the following:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- Piwik --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> _paq = _paq || [];</div><div class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">var</span> u=((<span class="string">"https:"</span> == <span class="built_in">document</span>.location.protocol) ? <span class="string">"https://&#123;$PIWIK_URL&#125;/"</span> : <span class="string">"http://&#123;$PIWIK_URL&#125;/"</span>);</div><div class="line">    _paq.push([<span class="string">'setSiteId'</span>, &#123;$IDSITE&#125;]);</div><div class="line">    _paq.push([<span class="string">'setTrackerUrl'</span>, u+<span class="string">'piwik.php'</span>]);</div><div class="line">    _paq.push([<span class="string">'trackPageView'</span>]);</div><div class="line">    _paq.push([<span class="string">'enableLinkTracking'</span>]);</div><div class="line">    <span class="keyword">var</span> d=<span class="built_in">document</span>, g=d.createElement(<span class="string">'script'</span>), s=d.getElementsByTagName(<span class="string">'script'</span>)[<span class="number">0</span>]; g.type=<span class="string">'text/javascript'</span>; g.defer=<span class="literal">true</span>; g.async=<span class="literal">true</span>; g.src=u+<span class="string">'piwik.js'</span>;</div><div class="line">    s.parentNode.insertBefore(g,s); &#125;)();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- End Piwik Code --&gt;</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>Where <code>$PIWIK_URL</code> will be the domain name you have setup for Piwik.</p>
</blockquote>
<h2 id="Step-2-Adding-Piwik-Tracking-Code-To-Ghost-Theme-File"><a href="#Step-2-Adding-Piwik-Tracking-Code-To-Ghost-Theme-File" class="headerlink" title="Step 2 - Adding Piwik Tracking Code To Ghost Theme File"></a>Step 2 - Adding Piwik Tracking Code To Ghost Theme File</h2><p>Piwik recommends that you add the tracking code right above the <code>&#60;/body&#62;</code> tag, which you can find in your Ghost’s <code>default.hbs</code> theme file. You will find the <code>default.hbs</code> file in <code>/path/to/ghost/content/themes/your-theme/default.hbs</code><br>How you add the tracking code to your <code>default.hbs</code> will depend on if you are editing the file on your local computer or directly on the server. If you are editing your theme locally you can edit this file in any text editor and when you are finished upload this file to your server. Otherwise if you are editing this file directly on the server you can use the command line editor, <code>vim</code>, to add the tracking code.</p>
<h2 id="Step-3-Restart-Ghost"><a href="#Step-3-Restart-Ghost" class="headerlink" title="Step 3 - Restart Ghost"></a>Step 3 - Restart Ghost</h2><p>For the changes in your theme to take effect you will need to restart Ghost. Restarting Ghost will load up a fresh copy of your theme files, with your Piwik tracking code. How you restart Ghost depends on how you started Ghost. If you followed our <a href="https://www.howtoinstallghost.com/how-to-start-ghost-with-forever/" target="_blank" rel="external">Keep Ghost Running with forever</a>, then you can restart Ghost with <code>forever restart ghost</code>.<br>Within a few moments you will start to see data coming in for your Ghost blog!<br>If you have any questions about setting this up or run into any issues please leave us a comment below and we will do what we can to help.</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/05/04/installing-python-2-7-8-on-centos-6-5/" class="prev">PREV</a><a href="/2016/04/27/how-to-install-piwik-with-nginx-on-centos-6-x/" class="next">NEXT</a></div><div class="copyright"><p>© 2012 - 2017 <a href="https://samzong.me">SAMZONG</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>