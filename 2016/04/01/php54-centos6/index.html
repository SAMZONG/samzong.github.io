<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 如何在CentOS 6 安装更高版本的PHP · SAMZONG</title><meta name="description" content="如何在CentOS 6 安装更高版本的PHP - SAMZONG"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://samzong.me/atom.xml" title="SAMZONG"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">如何在CentOS 6 安装更高版本的PHP</h1><div class="post-info">Apr 1, 2016</div><div class="post-content"><p><br>CentOS 6 默认安装的PHP 版本是5.3， 但现在很多应用对于LAMP中，PHP的版本最低5.4，所以本篇文章的主要内容是，如何升级PHP5.3到5.4以及更高版本<br> </p>

<h2 id="实验环境：CentOS-6-4"><a href="#实验环境：CentOS-6-4" class="headerlink" title="实验环境：CentOS 6.4"></a>实验环境：CentOS 6.4</h2><p>解决办法是采用了remi源仓库已经适配的相应php版本</p>
<blockquote>
<p>经过测试，该升级办法同样适用目前CentOS 6.x 所有版本</p>
</blockquote>
<h4 id="1-安装Remi源"><a href="#1-安装Remi源" class="headerlink" title="1. 安装Remi源"></a>1. 安装Remi源</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 因为remi依赖epel源仓库，所有我们要先安装它。</span></div><div class="line">[root<span class="symbol">@visionet8</span> ~]<span class="meta"># yum install -y epel-release</span></div><div class="line"></div><div class="line">[root<span class="symbol">@visionet8</span> ~]<span class="meta"># wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm</span></div><div class="line">[root<span class="symbol">@visionet8</span> ~]<span class="meta"># rpm -Uvh remi-release-6.rpm</span></div></pre></td></tr></table></figure>
<h4 id="2-我们看下Remi的的yum配置文件"><a href="#2-我们看下Remi的的yum配置文件" class="headerlink" title="2. 我们看下Remi的的yum配置文件"></a>2. 我们看下Remi的的yum配置文件</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Repository: http://rpms.remirepo.net/</span></div><div class="line"><span class="comment"># Blog:       http://blog.remirepo.net/</span></div><div class="line"><span class="comment"># Forum:      http://forum.remirepo.net/</span></div><div class="line"></div><div class="line">[remi]</div><div class="line"><span class="attribute">name</span>=Remi's RPM repository <span class="keyword">for</span> Enterprise Linux 6 - <span class="variable">$basearch</span></div><div class="line"><span class="attribute">baseurl</span>=http://rpms.remirepo.net/enterprise/6/remi/$basearch/</div><div class="line"><span class="comment">#mirrorlist=http://rpms.remirepo.net/enterprise/6/remi/mirror</span></div><div class="line"><span class="attribute">enabled</span>=1</div><div class="line"><span class="attribute">gpgcheck</span>=0</div><div class="line"><span class="attribute">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</div><div class="line"></div><div class="line">[remi-php55]</div><div class="line"><span class="attribute">name</span>=Remi's PHP 5.5 RPM repository <span class="keyword">for</span> Enterprise Linux 6 - <span class="variable">$basearch</span></div><div class="line"><span class="comment">#baseurl=http://rpms.remirepo.net/enterprise/6/php55/$basearch/</span></div><div class="line"><span class="attribute">mirrorlist</span>=http://rpms.remirepo.net/enterprise/6/php55/mirror</div><div class="line"><span class="comment"># NOTICE: common dependencies are in "remi-safe"</span></div><div class="line"><span class="attribute">enabled</span>=0</div><div class="line"><span class="attribute">gpgcheck</span>=1</div><div class="line"><span class="attribute">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</div><div class="line"></div><div class="line">[remi-php56]</div><div class="line"><span class="attribute">name</span>=Remi's PHP 5.6 RPM repository <span class="keyword">for</span> Enterprise Linux 6 - <span class="variable">$basearch</span></div><div class="line"><span class="comment">#baseurl=http://rpms.remirepo.net/enterprise/6/php56/$basearch/</span></div><div class="line"><span class="attribute">mirrorlist</span>=http://rpms.remirepo.net/enterprise/6/php56/mirror</div><div class="line"><span class="comment"># NOTICE: common dependencies are in "remi-safe"</span></div><div class="line"><span class="attribute">enabled</span>=0</div><div class="line"><span class="attribute">gpgcheck</span>=1</div><div class="line"><span class="attribute">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</div></pre></td></tr></table></figure>
<p>经过测试，启用remi源之后，默认情况下php版本为5.4,这时我们只需要升级php即可。</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line">[root@visionet8 html]# yum update -y php*</div><div class="line">Failed to set locale, defaulting to C</div><div class="line">Loaded plugins: fastestmirror, refresh-packagekit, security</div><div class="line">Loading mirror speeds from cached hostfile</div><div class="line"> * base: mirrors.163.com</div><div class="line"> * epel: mirrors.ustc.edu.cn</div><div class="line"> * extras: mirrors.aliyun.com</div><div class="line"> * remi-safe: mirrors.tuna.tsinghua.edu.cn</div><div class="line"> * updates: mirrors.cn99.com</div><div class="line">remi                                                                               | 2.9 kB     00:00</div><div class="line">remi/primary_db                                                                    | 1.6 MB     00:05</div><div class="line">Setting up Update Process</div><div class="line">Resolving Dependencies</div><div class="line">--&gt; Running transaction check</div><div class="line">---&gt; Package php.x86_64 0:5.3.3<span class="string">-48</span>.el6_8 will be updated</div><div class="line">---&gt; Package php.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi will be an update</div><div class="line">---&gt; Package php-cli.x86_64 0:5.3.3<span class="string">-48</span>.el6_8 will be updated</div><div class="line">---&gt; Package php-cli.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi will be an update</div><div class="line">---&gt; Package php-common.x86_64 0:5.3.3<span class="string">-48</span>.el6_8 will be updated</div><div class="line">---&gt; Package php-common.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi will be an update</div><div class="line">---&gt; Package php-gd.x86_64 0:5.3.3<span class="string">-48</span>.el6_8 will be updated</div><div class="line">---&gt; Package php-gd.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi will be an update</div><div class="line">--&gt; Processing Dependency: libt1.so.5()(64bit) for package: php-gd<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64</div><div class="line">---&gt; Package php-mcrypt.x86_64 0:5.3.3<span class="string">-4</span>.el6 will be updated</div><div class="line">---&gt; Package php-mcrypt.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi will be an update</div><div class="line">---&gt; Package php-mysql.x86_64 0:5.3.3<span class="string">-48</span>.el6_8 will be updated</div><div class="line">---&gt; Package php-mysql.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi will be an update</div><div class="line">---&gt; Package php-pdo.x86_64 0:5.3.3<span class="string">-48</span>.el6_8 will be updated</div><div class="line">---&gt; Package php-pdo.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi will be an update</div><div class="line">--&gt; Running transaction check</div><div class="line">---&gt; Package t1lib.x86_64 0:5.1.2<span class="string">-6</span>.el6_2.1 will be installed</div><div class="line">--&gt; Finished Dependency Resolution</div><div class="line"></div><div class="line">Dependencies Resolved</div><div class="line"></div><div class="line">==========================================================================================================</div><div class="line"> Package                  Arch                 Version                           Repository          Size</div><div class="line">==========================================================================================================</div><div class="line">Updating:</div><div class="line"> php                      x86_64               5.4.45<span class="string">-12</span>.el6.remi                remi               2.8 M</div><div class="line"> php-cli                  x86_64               5.4.45<span class="string">-12</span>.el6.remi                remi               4.1 M</div><div class="line"> php-common               x86_64               5.4.45<span class="string">-12</span>.el6.remi                remi               968 k</div><div class="line"> php-gd                   x86_64               5.4.45<span class="string">-12</span>.el6.remi                remi               152 k</div><div class="line"> php-mcrypt               x86_64               5.4.45<span class="string">-12</span>.el6.remi                remi                60 k</div><div class="line"> php-mysql                x86_64               5.4.45<span class="string">-12</span>.el6.remi                remi               145 k</div><div class="line"> php-pdo                  x86_64               5.4.45<span class="string">-12</span>.el6.remi                remi               129 k</div><div class="line">Installing for dependencies:</div><div class="line"> t1lib                    x86_64               5.1.2<span class="string">-6</span>.el6_2.1                   base               160 k</div><div class="line"></div><div class="line">Transaction Summary</div><div class="line">==========================================================================================================</div><div class="line">Install       1 Package(s)</div><div class="line">Upgrade       7 Package(s)</div><div class="line"></div><div class="line">Total download size: 8.5 M</div><div class="line">Downloading Packages:</div><div class="line">(1/8): php<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64.rpm                                           | 2.8 MB     00:07</div><div class="line">(2/8): php-cli<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64.rpm                                       | 4.1 MB     00:06</div><div class="line">(3/8): php-common<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64.rpm                                    | 968 kB     00:02</div><div class="line">(4/8): php-gd<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64.rpm                                        | 152 kB     00:01</div><div class="line">(5/8): php-mcrypt<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64.rpm                                    |  60 kB     00:00</div><div class="line">(6/8): php-mysql<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64.rpm                                     | 145 kB     00:00</div><div class="line">(7/8): php-pdo<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64.rpm                                       | 129 kB     00:01</div><div class="line">(8/8): t1lib<span class="string">-5</span>.1.2<span class="string">-6</span>.el6_2.1.x86_64.rpm                                            | 160 kB     00:00</div><div class="line">----------------------------------------------------------------------------------------------------------</div><div class="line">Total                                                                     338 kB/s | 8.5 MB     00:25</div><div class="line">Running rpm_check_debug</div><div class="line">Running Transaction Test</div><div class="line">Transaction Test Succeeded</div><div class="line">Running Transaction</div><div class="line">Warning: RPMDB altered outside of yum.</div><div class="line">  Updating   : php-common<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                  1/15</div><div class="line">  Updating   : php-cli<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                     2/15</div><div class="line">  Updating   : php-pdo<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                     3/15</div><div class="line">  Installing : t1lib<span class="string">-5</span>.1.2<span class="string">-6</span>.el6_2.1.x86_64                                                          4/15</div><div class="line">  Updating   : php-gd<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                      5/15</div><div class="line">  Updating   : php-mysql<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                   6/15</div><div class="line">  Updating   : php<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                         7/15</div><div class="line">  Updating   : php-mcrypt<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                  8/15</div><div class="line">  Cleanup    : php<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                             9/15</div><div class="line">  Cleanup    : php-mysql<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                      10/15</div><div class="line">  Cleanup    : php-pdo<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                        11/15</div><div class="line">  Cleanup    : php-cli<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                        12/15</div><div class="line">  Cleanup    : php-gd<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                         13/15</div><div class="line">  Cleanup    : php-mcrypt<span class="string">-5</span>.3.3<span class="string">-4</span>.el6.x86_64                                                        14/15</div><div class="line">  Cleanup    : php-common<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                     15/15</div><div class="line">  Verifying  : php-mcrypt<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                  1/15</div><div class="line">  Verifying  : t1lib<span class="string">-5</span>.1.2<span class="string">-6</span>.el6_2.1.x86_64                                                          2/15</div><div class="line">  Verifying  : php-common<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                  3/15</div><div class="line">  Verifying  : php-gd<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                      4/15</div><div class="line">  Verifying  : php-cli<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                     5/15</div><div class="line">  Verifying  : php-pdo<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                     6/15</div><div class="line">  Verifying  : php-mysql<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                   7/15</div><div class="line">  Verifying  : php<span class="string">-5</span>.4.45<span class="string">-12</span>.el6.remi.x86_64                                                         8/15</div><div class="line">  Verifying  : php<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                             9/15</div><div class="line">  Verifying  : php-gd<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                         10/15</div><div class="line">  Verifying  : php-cli<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                        11/15</div><div class="line">  Verifying  : php-pdo<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                        12/15</div><div class="line">  Verifying  : php-common<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                     13/15</div><div class="line">  Verifying  : php-mysql<span class="string">-5</span>.3.3<span class="string">-48</span>.el6_8.x86_64                                                      14/15</div><div class="line">  Verifying  : php-mcrypt<span class="string">-5</span>.3.3<span class="string">-4</span>.el6.x86_64                                                        15/15</div><div class="line"></div><div class="line">Dependency Installed:</div><div class="line">  t1lib.x86_64 0:5.1.2<span class="string">-6</span>.el6_2.1</div><div class="line"></div><div class="line">Updated:</div><div class="line">  php.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi                      php-cli.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi</div><div class="line">  php-common.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi               php-gd.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi</div><div class="line">  php-mcrypt.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi               php-mysql.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi</div><div class="line">  php-pdo.x86_64 0:5.4.45<span class="string">-12</span>.el6.remi</div><div class="line"></div><div class="line">Complete!</div></pre></td></tr></table></figure>
<h4 id="3-测试："><a href="#3-测试：" class="headerlink" title="3. 测试："></a>3. 测试：</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@visionet8 html]# php -v</div><div class="line">PHP 5.4.45 (cli) (built: Sep 19 2016 15:31:07)</div><div class="line">Copyright (c) 1997-2014 The PHP<span class="built_in"> Group</span></div><div class="line">Zend Engine v2.4.0, Copyright (c) 1998-2014 Zend Technologies</div></pre></td></tr></table></figure>
<h4 id="4-php-5-5-和php5-6"><a href="#4-php-5-5-和php5-6" class="headerlink" title="4. php 5.5 和php5.6"></a>4. php 5.5 和php5.6</h4><blockquote>
<p> 若要升级到5.5 或 5.6，根据remi源的配置文件，将php5.5的enable参数设置为1，并将默认enable修改为0,然后<code>yum update php*</code>即可。</p>
<hr>


</blockquote>
<h4 id="5-php-7"><a href="#5-php-7" class="headerlink" title="5. php 7"></a>5. php 7</h4><blockquote>
<p>安装完成之后发现, 在安装remi源之后，在<code>/etc/yum.repos.d</code>除了<code>remi.repo</code>之外，还有<code>remi-php70.repo</code>和<code>remi-php71.repo</code>，测试下，如果要升级到php7，可以打开相应源仓库的配置文件，之后升级即可。</p>
</blockquote>
<p><br></p>
<blockquote>
<p><b>以上功能在升级时，要考虑其他组件的版本兼容性，不要盲目升级。</b></p>
</blockquote>
</div></article></div></main><footer><div class="paginator"><a href="/2016/04/08/zsh-bug01/" class="prev">PREV</a><a href="/2016/03/29/mysqlshu-ju-ku-ji-chu/" class="next">NEXT</a></div><div class="copyright"><p>© 2012 - 2017 <a href="https://samzong.me">SAMZONG</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>