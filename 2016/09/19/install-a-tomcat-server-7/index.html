<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> HowTo Install a Tomcat Server 7 · SAMZONG</title><meta name="description" content="HowTo Install a Tomcat Server 7 - SAMZONG"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://samzong.me/atom.xml" title="SAMZONG"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">HowTo Install a Tomcat Server 7</h1><div class="post-info">Sep 19, 2016</div><div class="post-content"><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本文件是采用的模板是CentOS 6，同样适用于CentOS 系列其他发行版本。</p>
<h4 id="1-测试环境"><a href="#1-测试环境" class="headerlink" title="1. 测试环境"></a>1. 测试环境</h4><ul>
<li>VMware Fushion 8 Pro # windows Use <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">VirtualBox</a></li>
<li><a href="http://mirrors.aliyun.com/centos/6.8/isos/x86_64/CentOS-6.8-x86_64-minimal.iso" target="_blank" rel="external">CentOS-6.8-x86_64-minimal.iso</a></li>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">JDK 7</a></li>
<li><a href="http://ftp.riken.jp/net/apache/tomcat/tomcat-7/" target="_blank" rel="external">Tomcat 7</a></li>
</ul>
<h4 id="2-Install-Java-SE-Development-Kit-7-JDK7"><a href="#2-Install-Java-SE-Development-Kit-7-JDK7" class="headerlink" title="2. Install Java SE Development Kit 7 (JDK7)"></a>2. Install Java SE Development Kit 7 (JDK7)</h4><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@ultraera ~]# curl -LO -H <span class="string">"Cookie: oraclelicense=accept-securebackup-cookie"</span> \</div><div class="line"><span class="string">"http://download.oracle.com/otn-pub/java/jdk/7u75-b13/jdk-7u75-linux-x64.rpm"</span></div><div class="line">[root@ultraera ~]# rpm -Uvh jdk<span class="number">-7</span>u75-linux-x64.rpm</div><div class="line">Preparing...                ########################################### [<span class="number">100</span>%]</div><div class="line">   <span class="number">1</span>:jdk                    ########################################### [<span class="number">100</span>%]</div><div class="line">Unpacking JAR files...</div><div class="line">        rt.jar...</div><div class="line">        jsse.jar...</div><div class="line">        charsets.jar...</div><div class="line">        tools.jar...</div><div class="line">        localedata.jar...</div><div class="line">        jfxrt.jar...</div></pre></td></tr></table></figure>
<h4 id="3-Build-Java-Environment"><a href="#3-Build-Java-Environment" class="headerlink" title="3. Build Java Environment."></a>3. Build Java Environment.</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@ultraera ~]# vi /etc<span class="built_in">/profile</span></div><div class="line"><span class="comment"># add follows to the end</span></div><div class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/java/default</div><div class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$JAVA_HOME/bin</div><div class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:$JAVA_HOME/jre/lib:$JAVA_HOME/lib:$JAVA_HOME/lib/tools.jar</div><div class="line">[root@ultraera ~]# source /etc<span class="built_in">/profile</span></div><div class="line">[root@ultraera ~]# java -version</div><div class="line">java version <span class="string">"1.7.0_75"</span></div><div class="line">Java(TM) SE Runtime Environment (build 1.7.0_75-b13)</div><div class="line">Java HotSpot(TM) 64-Bit<span class="built_in"> Server </span>VM (build 24.75-b04, mixed mode)</div></pre></td></tr></table></figure>
<h4 id="4-Download-Tomcat7"><a href="#4-Download-Tomcat7" class="headerlink" title="4. Download Tomcat7"></a>4. Download Tomcat7</h4><p>Make sure the latest one and download it from the site below.<br>=》 <a href="http://ftp.riken.jp/net/apache/tomcat/tomcat-7/" target="_blank" rel="external">http://ftp.riken.jp/net/apache/tomcat/tomcat-7/</a></p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@ultraera</span> ~]<span class="meta"># wget http://ftp.riken.jp/net/apache/tomcat/tomcat-7/v7.0.70/bin/apache-tomcat-7.0.70.tar.gz</span></div><div class="line">[root<span class="symbol">@ultraera</span> ~]<span class="meta"># tar zxvf apache-tomcat-7.0.70.tar.gz</span></div><div class="line">[root<span class="symbol">@ultraera</span> ~]<span class="meta"># mv apache-tomcat-7.0.70 /usr/tomcat7</span></div><div class="line">[root<span class="symbol">@ultraera</span> ~]<span class="meta"># useradd -M -d /usr/tomcat7 tomcat7</span></div><div class="line">[root<span class="symbol">@ultraera</span> ~]<span class="meta"># chown -R tomcat7. /usr/tomcat7</span></div></pre></td></tr></table></figure>
<h4 id="5-create-a-script-use-service-manage-tomcat7"><a href="#5-create-a-script-use-service-manage-tomcat7" class="headerlink" title="5. create a script , use service manage tomcat7"></a>5. create a script , use service manage tomcat7</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">[root@ultraera ~]# cat /etc/rc.d/init.d/tomcat7</div><div class="line"> #!/bin/bash</div><div class="line"></div><div class="line"><span class="comment"># Tomcat7: Start/Stop Tomcat 7</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># chkconfig: - 90 10</span></div><div class="line"><span class="comment"># description: Tomcat is a Java application Server.</span></div><div class="line"></div><div class="line">. /etc/init.d/functions</div><div class="line">. /etc/sysconfig<span class="built_in">/network</span></div><div class="line"></div><div class="line"><span class="attribute">CATALINA_HOME</span>=/usr/tomcat7</div><div class="line"><span class="attribute">TOMCAT_USER</span>=tomcat7</div><div class="line"></div><div class="line"><span class="attribute">LOCKFILE</span>=/var/lock/subsys/tomcat7</div><div class="line"></div><div class="line"><span class="attribute">RETVAL</span>=0</div><div class="line">start()&#123;</div><div class="line">    echo <span class="string">"Starting Tomcat7: "</span></div><div class="line">    su - <span class="variable">$TOMCAT_USER</span> -c <span class="string">"<span class="variable">$CATALINA_HOME</span>/bin/startup.sh"</span></div><div class="line">    <span class="attribute">RETVAL</span>=$?</div><div class="line">    echo</div><div class="line">    [ <span class="variable">$RETVAL</span> -eq 0 ] &amp;&amp; touch <span class="variable">$LOCKFILE</span></div><div class="line">    return <span class="variable">$RETVAL</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">stop()&#123;</div><div class="line">    echo <span class="string">"Shutting down Tomcat7: "</span></div><div class="line">    <span class="variable">$CATALINA_HOME</span>/bin/shutdown.sh</div><div class="line">    <span class="attribute">RETVAL</span>=$?</div><div class="line">    echo</div><div class="line">    [ <span class="variable">$RETVAL</span> -eq 0 ] &amp;&amp; rm -f <span class="variable">$LOCKFILE</span></div><div class="line">    return <span class="variable">$RETVAL</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">case <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></div><div class="line">    start)</div><div class="line">        start</div><div class="line">        ;;</div><div class="line">    stop)</div><div class="line">        stop</div><div class="line">        ;;</div><div class="line">    restart)</div><div class="line">        stop</div><div class="line">        start</div><div class="line">        ;;</div><div class="line">    *)</div><div class="line">        echo $<span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|restart&#125;"</span></div><div class="line">        exit 1</div><div class="line">        ;;</div><div class="line">esac</div><div class="line">exit $?</div></pre></td></tr></table></figure>
<h4 id="6-Add-tomcat7-to-system-service"><a href="#6-Add-tomcat7-to-system-service" class="headerlink" title="6. Add tomcat7 to system service"></a>6. Add tomcat7 to system service</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@ultraera ~]# chmod 755 /etc/rc.d/init.d/tomcat7</div><div class="line">[root@ultraera ~]# /etc/rc.d/init.d/tomcat7 start</div><div class="line">Starting Tomcat7:</div><div class="line">Using CATALINA_BASE:   /usr/tomcat7</div><div class="line">Using CATALINA_HOME:   /usr/tomcat7</div><div class="line">Using CATALINA_TMPDIR: /usr/tomcat7/temp</div><div class="line">Using JRE_HOME:        /usr/java/default</div><div class="line">Using CLASSPATH:       /usr/tomcat7/bin/bootstrap.jar:/usr/tomcat7/bin/tomcat-juli.jar</div><div class="line">Tomcat started.</div><div class="line">[root@ultraera ~]# netstat -ntlp | grep java</div><div class="line">tcp        0      0 ::ffff:127.0.0.1:8005       :::*                        LISTEN      6326/java</div><div class="line">tcp        0      0 :::8009                     :::*                        LISTEN      6326/java</div><div class="line">tcp        0      0 :::8080                    :::*                        LISTEN      6326/java</div><div class="line">[root@ultraera ~]# ps axu | grep java</div><div class="line">tomcat7       6326  8.3 85.6 5229768 2910176 ?     Sl   Aug22 3216:38 /usr/bin/java -Djava.util.logging.config.file=/usr/tomcat7/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -server -Djava.endorsed.dirs=/usr/tomcat7/endorsed -classpath /usr/tomcat7/bin/bootstrap.jar:/usr/tomcat7/bin/tomcat-juli.jar -Dcatalina.base=/usr/tomcat7 -Dcatalina.home=/usr/tomcat7 -Djava.io.tmpdir=/usr/tomcat7/temp org.apache.catalina.startup.Bootstrap start</div><div class="line">[root@ultraera ~]# chkconfig --add tomcat7</div><div class="line">[root@ultraera ~]# chkconfig tomcat7 on</div></pre></td></tr></table></figure>
<h4 id="7-打开浏览器测试Tomcat-Server搭建完成，默认页面如下"><a href="#7-打开浏览器测试Tomcat-Server搭建完成，默认页面如下" class="headerlink" title="7. 打开浏览器测试Tomcat Server搭建完成，默认页面如下"></a>7. 打开浏览器测试Tomcat Server搭建完成，默认页面如下</h4><p><img src="https://samzong.oss-cn-shenzhen.aliyuncs.com/2016/09/tomcat7.jpg" alt=""></p>
<h4 id="8-使用curl-测试"><a href="#8-使用curl-测试" class="headerlink" title="8. 使用curl 测试"></a>8. 使用curl 测试</h4><figure class="highlight ldif"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@ultraera ~]<span class="comment"># curl -I http://localhost:8080</span></div><div class="line"><span class="attribute">HTTP/1.1 200 OK</span></div><div class="line">Server: Apache-Coyote/1.1</div><div class="line"><span class="attribute">Content-Type</span>: text/html;charset=ISO-8859-1</div><div class="line"><span class="attribute">Transfer-Encoding</span>: chunked</div><div class="line"><span class="attribute">Date</span>: Sun, 18 Sep 2016 11:14:06 GMT</div></pre></td></tr></table></figure>
<h4 id="9-Tomcat-文件树"><a href="#9-Tomcat-文件树" class="headerlink" title="9. Tomcat 文件树"></a>9. Tomcat 文件树</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[root@ultraera /usr/tomcat7]</span># <span class="selector-tag">tree</span></div><div class="line">.</div><div class="line">├── <span class="selector-tag">bin</span></div><div class="line">│   ├── <span class="selector-tag">bootstrap</span><span class="selector-class">.jar</span></div><div class="line">│   ├── <span class="selector-tag">catalina</span><span class="selector-class">.bat</span></div><div class="line">│   ├── <span class="selector-tag">catalina</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">catalina-tasks</span><span class="selector-class">.xml</span></div><div class="line">│   ├── <span class="selector-tag">commons-daemon</span><span class="selector-class">.jar</span></div><div class="line">│   ├── <span class="selector-tag">commons-daemon-native</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line">│   ├── <span class="selector-tag">configtest</span><span class="selector-class">.bat</span></div><div class="line">│   ├── <span class="selector-tag">configtest</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">daemon</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">digest</span><span class="selector-class">.bat</span></div><div class="line">│   ├── <span class="selector-tag">digest</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">setclasspath</span><span class="selector-class">.bat</span></div><div class="line">│   ├── <span class="selector-tag">setclasspath</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">shutdown</span><span class="selector-class">.bat</span></div><div class="line">│   ├── <span class="selector-tag">shutdown</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">startup</span><span class="selector-class">.bat</span></div><div class="line">│   ├── <span class="selector-tag">startup</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">tomcat-juli</span><span class="selector-class">.jar</span></div><div class="line">│   ├── <span class="selector-tag">tomcat-native</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line">│   ├── <span class="selector-tag">tool-wrapper</span><span class="selector-class">.bat</span></div><div class="line">│   ├── <span class="selector-tag">tool-wrapper</span><span class="selector-class">.sh</span></div><div class="line">│   ├── <span class="selector-tag">version</span><span class="selector-class">.bat</span></div><div class="line">│   └── <span class="selector-tag">version</span><span class="selector-class">.sh</span></div><div class="line">├── <span class="selector-tag">conf</span></div><div class="line">│   ├── <span class="selector-tag">catalina</span><span class="selector-class">.policy</span></div><div class="line">│   ├── <span class="selector-tag">catalina</span><span class="selector-class">.properties</span></div><div class="line">│   ├── <span class="selector-tag">context</span><span class="selector-class">.xml</span></div><div class="line">│   ├── <span class="selector-tag">logging</span><span class="selector-class">.properties</span></div><div class="line">│   ├── <span class="selector-tag">server</span><span class="selector-class">.xml</span></div><div class="line">│   ├── <span class="selector-tag">tomcat-users</span><span class="selector-class">.xml</span></div><div class="line">│   └── <span class="selector-tag">web</span><span class="selector-class">.xml</span></div><div class="line">├── <span class="selector-tag">lib</span></div><div class="line">├── <span class="selector-tag">LICENSE</span></div><div class="line">├── <span class="selector-tag">logs</span></div><div class="line">│   ├── <span class="selector-tag">catalina</span><span class="selector-class">.2016-09-18</span><span class="selector-class">.log</span></div><div class="line">│   ├── <span class="selector-tag">catalina</span><span class="selector-class">.out</span></div><div class="line">│   ├── <span class="selector-tag">host-manager</span><span class="selector-class">.2016-09-18</span><span class="selector-class">.log</span></div><div class="line">│   ├── <span class="selector-tag">localhost</span><span class="selector-class">.2016-09-18</span><span class="selector-class">.log</span></div><div class="line">│   └── <span class="selector-tag">manager</span><span class="selector-class">.2016-09-18</span><span class="selector-class">.log</span></div><div class="line">├── <span class="selector-tag">NOTICE</span></div><div class="line">├── <span class="selector-tag">RELEASE-NOTES</span></div><div class="line">├── <span class="selector-tag">RUNNING</span><span class="selector-class">.txt</span></div><div class="line">├── <span class="selector-tag">temp</span></div><div class="line">├── <span class="selector-tag">webapps</span></div><div class="line">│   └── <span class="selector-tag">ROOT</span></div><div class="line">└── <span class="selector-tag">work</span></div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2016/09/20/life-is-alone/" class="prev">PREV</a><a href="/2016/08/19/er-shi-si-sui/" class="next">NEXT</a></div><div class="copyright"><p>© 2012 - 2017 <a href="https://samzong.me">SAMZONG</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>