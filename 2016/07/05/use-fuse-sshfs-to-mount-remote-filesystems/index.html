<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> HowTo Use Fuse-sshfs to Mount Remote Filesystems · SAMZONG</title><meta name="description" content="HowTo Use Fuse-sshfs to Mount Remote Filesystems - SAMZONG"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://samzong.me/atom.xml" title="SAMZONG"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">HowTo Use Fuse-sshfs to Mount Remote Filesystems</h1><div class="post-info">Jul 5, 2016</div><div class="post-content"><p>传统我们服务器之间文件共享的方式有采用NFS、Samba等等，但是在我看来配置都有一定的复杂性，当然复杂也有它们的优势，这里推荐一个依赖于SSH的文件共享工具，Fuse-sshfs。<br><br>SSH 是一个强大且安全的工具，我们除了可以用它来远程管理主机外，还可以通过它建立 SSH tunnel 作 Proxy 用，远程传输文件等等。而这里我想要介绍另外一个功能，那就是结合 sshfs 这个工具可以把远程主机的文件系统映射到本地主机上，透过 SSH 把远程文件系统挂载到本机上，这样我们可以不必使用 scp 工具就可以做到直接复制及删除远程主机的文件了，就像操作本地磁盘一样方便。<br><br>sshfs 是基于 FUSE 构建的 SSH 文件系统客户端程序，通过它远程主机的配置无需作任何改变，就可以透过 SSH 协议来挂载远程文件系统了，非常方便及安全。<br><br></p>
<h3 id="Install-fuse-sshfs"><a href="#Install-fuse-sshfs" class="headerlink" title="Install fuse-sshfs"></a>Install fuse-sshfs</h3><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="built_in">cent</span><span class="keyword">@localhost</span> ~]$ sudo yum install -y epel-relese</div><div class="line">[<span class="built_in">cent</span><span class="keyword">@localhost</span> ~]$ sudo yum --enablerepo=epel install -y fuse-sshfs</div></pre></td></tr></table></figure>
<h3 id="挂载远程-ssh文件系统"><a href="#挂载远程-ssh文件系统" class="headerlink" title="挂载远程 ssh文件系统"></a>挂载远程 ssh文件系统</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[cent<span class="variable">@localhost</span> ~]<span class="variable">$ </span>mkdir ./mnt</div><div class="line">[cent<span class="variable">@localhost</span> ~]<span class="variable">$ </span>sshfs root<span class="variable">@192</span>.<span class="number">168.16</span>.<span class="number">230</span><span class="symbol">:/home/</span> ./mnt</div><div class="line">root<span class="variable">@192</span>.<span class="number">168.16</span>.<span class="number">230</span><span class="string">'s password:</span></div><div class="line">[cent@localhost ~]$ mount</div><div class="line">root@192.168.16.230:/home/ on /home/cent/mnt type fuse.sshfs (rw,nosuid,nodev,user=cent)</div></pre></td></tr></table></figure>
<h3 id="卸载远程-ssh文件系统"><a href="#卸载远程-ssh文件系统" class="headerlink" title="卸载远程 ssh文件系统"></a>卸载远程 ssh文件系统</h3><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="built_in">cent</span><span class="keyword">@localhost</span> ~]$ fusermount -u ./mnt</div></pre></td></tr></table></figure>
<h3 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby">C 压缩，或者-o compression=yes</span></div><div class="line">-<span class="ruby">o reconnect 自动重连</span></div><div class="line">-<span class="ruby">o transform_symlinks 表示转换绝对链接符号为相对链接符号</span></div><div class="line">-<span class="ruby">o follow_symlinks 沿用服务器上的链接符号</span></div><div class="line">-<span class="ruby">o cache=yes</span></div><div class="line">-<span class="ruby">o allow_other 这个参数最重要，必须写，否则任何文件都是Permission Deny</span></div></pre></td></tr></table></figure>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>当然sshfs也不尽是优点，例如远程主机失去响应后本地挂载点卡死并影响本地系统使用，需要手工找出 sshfs进程并杀死，因网速问题造成操作响应缓慢等等，不过一般在稳定快速的网络中不太会遇上，对比其强大的功能，还是可以接受的，正所谓暇不掩瑜。</p>
<ol>
<li>所以sshfs适合内部网络比较稳定的地方</li>
<li>配合ssh免密登录使用会更好哦</li>
<li>可以看到的是sshfs默认挂载是rw的权限，但是通过sshfs –help 可以看到有非常详尽的参数配置可以选择，大家可以仔细研究下。</li>
</ol>
<h3 id="附1"><a href="#附1" class="headerlink" title="附1."></a>附1.</h3><p><a href="http://igikorn.com/sshfs-windows-8/" target="_blank" rel="external">Link</a> 在windows下可以使用sshfs.</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/07/07/redis01/" class="prev">PREV</a><a href="/2016/06/16/mysql03/" class="next">NEXT</a></div><div class="copyright"><p>© 2012 - 2017 <a href="https://samzong.me">SAMZONG</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>