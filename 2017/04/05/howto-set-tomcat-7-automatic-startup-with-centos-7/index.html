<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> HowTo set Tomcat 7 automatic startup with CentOS 7 · SAMZONG</title><meta name="description" content="HowTo set Tomcat 7 automatic startup with CentOS 7 - SAMZONG"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://samzong.me/atom.xml" title="SAMZONG"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">HowTo set Tomcat 7 automatic startup with CentOS 7</h1><div class="post-info">Apr 5, 2017</div><div class="post-content"><p>因CentOS7与6在系统上，变化较大，所以在之前的文章中讲到的使用Tomcat7开机自启动的方式在CentOS7是是无法使用的，所以这篇文章的目的是如何在CentOS7上将Tomcat7设置为开机自启动。</p>
<h4 id="安装JAVA环境"><a href="#安装JAVA环境" class="headerlink" title="安装JAVA环境"></a>安装JAVA环境</h4><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[root@<span class="number">7</span> ~]# curl -LO -H <span class="string">"Cookie: oraclelicense=accept-securebackup-cookie"</span> \</div><div class="line"><span class="string">"http://download.oracle.com/otn-pub/java/jdk/7u75-b13/jdk-7u75-linux-x64.rpm"</span></div><div class="line"></div><div class="line">[root@<span class="number">7</span> ~]# rpm -Uvh jdk<span class="number">-7</span>u75-linux-x64.rpm</div><div class="line">Preparing...                ########################################### [<span class="number">100</span>%]</div><div class="line">   <span class="number">1</span>:jdk                    ########################################### [<span class="number">100</span>%]</div><div class="line">Unpacking JAR files...</div><div class="line">        rt.jar...</div><div class="line">        jsse.jar...</div><div class="line">        charsets.jar...</div><div class="line">        tools.jar...</div><div class="line">        localedata.jar...</div><div class="line">        jfxrt.jar...</div><div class="line"></div><div class="line">[root@<span class="number">7</span> ~]# vi /etc/profile</div><div class="line"># add follows to the end</div><div class="line"><span class="keyword">export</span> JAVA_HOME=/usr/java/default</div><div class="line"><span class="keyword">export</span> PATH=$PATH:$JAVA_HOME/bin</div><div class="line"><span class="keyword">export</span> CLASSPATH=.:$JAVA_HOME/jre/lib:$JAVA_HOME/lib:$JAVA_HOME/lib/tools.jar</div><div class="line">[root@<span class="number">7</span> ~]# source /etc/profile</div></pre></td></tr></table></figure>
<h4 id="安装Tomcat7"><a href="#安装Tomcat7" class="headerlink" title="安装Tomcat7"></a>安装Tomcat7</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[root<span class="symbol">@7</span> ~]<span class="meta"># wget http://ftp.riken.jp/net/apache/tomcat/tomcat-7/v7.0.77/bin/apache-tomcat-7.0.77.tar.gz</span></div><div class="line">[root<span class="symbol">@7</span> ~]<span class="meta"># tar zxvf apache-tomcat-7.0.77.tar.gz</span></div><div class="line">[root<span class="symbol">@7</span> ~]<span class="meta"># mv apache-tomcat-7.0.77 /usr/tomcat7</span></div><div class="line">[root<span class="symbol">@7</span> ~]<span class="meta"># useradd -M -d /usr/tomcat7 tomcat7</span></div><div class="line">[root<span class="symbol">@7</span> ~]<span class="meta"># chown -R tomcat7. /usr/tomcat7</span></div></pre></td></tr></table></figure>
<h4 id="创建开机自启动脚本"><a href="#创建开机自启动脚本" class="headerlink" title="创建开机自启动脚本"></a>创建开机自启动脚本</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="section">[root@7 ~]</span><span class="comment"># cat /usr/lib/systemd/system/tomcat7.service</span></div><div class="line"><span class="comment"># create new</span></div><div class="line"><span class="section"> [Unit]</span></div><div class="line"><span class="attr">Description</span>=Apache Tomcat <span class="number">7</span></div><div class="line"><span class="attr">After</span>=network.target</div><div class="line"><span class="section"></span></div><div class="line">[Service]</div><div class="line"><span class="attr">Type</span>=<span class="literal">on</span>eshot</div><div class="line"><span class="attr">ExecStart</span>=/usr/tomcat7/bin/startup.sh</div><div class="line"><span class="attr">ExecStop</span>=/usr/tomcat7/bin/shutdown.sh</div><div class="line"><span class="attr">RemainAfterExit</span>=<span class="literal">yes</span></div><div class="line"><span class="attr">User</span>=tomcat7</div><div class="line"><span class="attr">Group</span>=tomcat7</div><div class="line"><span class="section"></span></div><div class="line">[Install]</div><div class="line"><span class="attr">WantedBy</span>=multi-user.target</div></pre></td></tr></table></figure>
<h4 id="启动Tomcat7"><a href="#启动Tomcat7" class="headerlink" title="启动Tomcat7"></a>启动Tomcat7</h4><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@7</span> ~]<span class="meta"># systemctl start tomcat7.service</span></div><div class="line">[root<span class="symbol">@7</span> ~]<span class="meta"># systemctl enable tomcat7.service</span></div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2017/04/11/about-exam/" class="prev">PREV</a><a href="/2017/03/06/howto-install-zoomdata/" class="next">NEXT</a></div><div class="copyright"><p>© 2012 - 2017 <a href="https://samzong.me">SAMZONG</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>